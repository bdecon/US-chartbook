% % % % % % % % % % % % % % 
%
%	U.S. Chartbook
%	Brian W. Dew (brianwdew@gmail.com)
%	Updated: September 23, 2019
%	GitHub repo contains to do list (issues)
%   https://github.com/bdecon/US-chartbook
%
% % % % % % % % % % % % % %
\PassOptionsToPackage{table}{xcolor}
\documentclass{report}

%
% % % % % % Packages % % % % % % % % % 
%
	
	\usepackage[letterpaper, margin=1.2in]{geometry}
	\usepackage{microtype}
	\usepackage[default]{lato}
	\usepackage{pgfplots, pgfplotstable}
	\usepackage{xcolor}
	\usepackage{array}
	\usepackage{fontawesome}
	\usetikzlibrary{pgfplots.dateplot}

%
% % % % % Document Settings % % % % % % % 
%

	% Paragraph spacing
		\setlength{\parskip}{8pt}
		\setlength{\parindent}{0pt}
		
%
% % % % % Graph Settings % % % % % % % 
%
	
	% Color square
	\newcommand{\cbox}[1]{
		\begin{tikzpicture} \draw [#1, line width=6](0,0) -- (.2,0);  
		\end{tikzpicture}}
		
		
	\newcommand{\colorline}[1]{
	\begin{tikzpicture} \draw [#1, line width=1](0,0) -- (.6,0);  
		\end{tikzpicture}}
	
	% Last two digits of year
	\makeatletter
	\newcommand*\short[1]{\expandafter\@gobbletwo\number\numexpr#1\relax}
	\makeatother	
	
	% Column width and alignment
	\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}	
	
	% Style for date plots
	\pgfplotsset{compat=newest, 
		scaled y ticks=false,
		axis line style={black!20}, 
		xtick style={black!20}, ytick style={draw=none},
		every tick label/.style={black!50, font=\scriptsize,
			/pgf/number format/assume math mode=true},
		width=13.0cm, height=4.8cm, 
		xticklabel style={align=left}, 
		yticklabel style={text width=0.85em, align=right},       
		axis x line*=bottom, x axis line style={black!50},
	    axis y line=left, y axis line style={opacity=0},
	    ymajorgrids, grid style={very thin, black!10},	        
	    every node near coord/.style={/pgf/number format/fixed,
				font=\scriptsize, style={black!70}},
	    legend style={legend columns=-1, draw=none, fill=none,
	    	/tikz/every even column/.append style={column sep=0.3cm}},
	    select row/.style={
        	x filter/.code={\ifnum\coordindex=#1\else\def\pgfmathresult{}\fi}
    	}}
	
	% stacked diverging bar
	\newcommand{\sbar}[4]{
		\addplot[ybar stacked, bar width=2.7pt, draw opacity=0, fill=#1] 
			table [x=#2, y=#3, col sep=comma]{#4};}
					
	% text node
	\newcommand{\stdnode}[3]{\node[below, align=left, shift=({#1,#2})]{#3};}	        
		        
	% Date (X) Axis Tick Marks, one tick per year, every even year labeled
	\newcommand{\dateaxisticks}{
		date coordinates in=x, axis line style={draw=none},
		xmax={2019-10-01},
		max space between ticks=40,	    
		xtick={{1990-01-01}, {1992-01-01}, {1994-01-01}, 
			{1996-01-01}, {1998-01-01}, {2000-01-01}, 
			{2002-01-01}, {2004-01-01}, {2006-01-01},
			{2008-01-01}, {2010-01-01}, {2012-01-01}, {2014-01-01},
		    {2016-01-01}, {2018-01-01}},
		minor xtick={{1989-01-01}, {1991-01-01}, {1993-01-01},
			{1995-01-01}, {1997-01-01}, {1999-01-01}, 
			{2001-01-01}, {2003-01-01}, {2005-01-01}, {2007-01-01},
		    {2009-01-01}, {2011-01-01}, {2013-01-01}, {2015-01-01},
		    {2017-01-01}, {2019-01-01}},
		enlarge y limits={0.06}, enlarge x limits={0.01},
		}
	
	% Solid bars at significant  x or y values
	\newcommand{\bbar}[2]{extra #1 ticks = {{#2}}, extra #1 tick labels = ,
		extra #1 tick style = {grid=major, grid style={thick, black!25}},}
		
	% Standard line
	\newcommand{\stdline}[4]{\addplot[very thick, no markers, color=#1] 
		table [x=#2, y=#3, col sep=comma] {#4};	}
		
	% Recession bars		
	\newcommand{\rbars}{
		\fill[color=black!10] (axis cs:{1990-07-01},\pgfkeysvalueof{/pgfplots/ymin}) rectangle 
			(axis cs:{1991-03-01}, \pgfkeysvalueof{/pgfplots/ymax});
		\fill[color=black!10] (axis cs:{2007-12-01},\pgfkeysvalueof{/pgfplots/ymin}) rectangle 
			(axis cs:{2009-07-01}, \pgfkeysvalueof{/pgfplots/ymax});
		\fill[color=black!10] (axis cs:{2001-03-01},\pgfkeysvalueof{/pgfplots/ymin}) rectangle 
			(axis cs:{2001-11-01}, \pgfkeysvalueof{/pgfplots/ymax});}
			
	\newcommand{\rebars}{
		\fill[color=black!10] (axis cs:{2007-12-01},\pgfkeysvalueof{/pgfplots/ymin}) rectangle 
			(axis cs:{2009-07-01}, \pgfkeysvalueof{/pgfplots/ymax});
		\fill[color=black!10] (axis cs:{2001-03-01},\pgfkeysvalueof{/pgfplots/ymin}) rectangle 
			(axis cs:{2001-11-01}, \pgfkeysvalueof{/pgfplots/ymax});}
	
	%\newfontfamily\seriffont{SourceSerifPro}	
			    	
	
	% Settings for y label text in horizontal bar charts
	\newcommand{\barylab}[2]{yticklabel style={text width=#1, align=right, 
		style={black!70}, text height=#2},}
	
			    
	% Additional bar plot settings
	\newcommand{\barplotnogrid}{xbar=0pt,
	    y axis line style={opacity=0},   
	    x axis line style={opacity=0}, 
	    yticklabel style={align=left, anchor=east},
      		xmajorticks=false, ymajorgrids=false,   
	    ytick=data, tickwidth=0pt, area legend, reverse legend,
	    nodes near coords, nodes near coords align={horizontal},}    	
			    		    
% % % % % % % %
%
%  Begin Document
%
% % % % % % % %		
\begin{document}


\begin{minipage}{0.76\textwidth}

\vspace{2mm}

\small Text here....\\


The text goes here and somewhere in the center I will add a line for the legend. \\


\begin{tikzpicture} \draw [blue, line width=1](0,0) -- (.6,0);  
		\end{tikzpicture}

\vspace{4mm}


\normalsize \textbf{Mortgages and Consumer Credit}

\small \hspace{2mm} \textit{share of disposable personal income} \\

\input{text/hhcdebt2.txt}
\\

\footnotesize{Source: Federal Reserve Bank of New York} \\

\vspace{4mm}

\end{minipage}



\end{document}